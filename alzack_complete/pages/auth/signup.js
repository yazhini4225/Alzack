import {useState} from 'react'; import {useRouter} from 'next/router'
export default function Signup(){ const r=useRouter(); const role = r.query.role || 'PATIENT'; const [f,setF]=useState({name:'',email:'',password:'',phone:'',relationship:'',patientId:''})
 async function s(e){ e.preventDefault(); const res=await fetch('/api/auth/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({...f,role})}); const j=await res.json(); if(res.ok){ alert('Created'); r.push('/auth/login') } else alert('Error: '+j.error) }
 return (<div style={{padding:20}}><h2>Sign up {role}</h2><form onSubmit={s}><input placeholder='Name' value={f.name} onChange={e=>setF({...f,name:e.target.value})}/><br/><input placeholder='Email' value={f.email} onChange={e=>setF({...f,email:e.target.value})}/><br/><input placeholder='Phone' value={f.phone} onChange={e=>setF({...f,phone:e.target.value})}/><br/>{role==='CAREGIVER' && <input placeholder='Patient ID to link' value={f.patientId} onChange={e=>setF({...f,patientId:e.target.value})}/>}<input type='password' placeholder='Password' value={f.password} onChange={e=>setF({...f,password:e.target.value})}/><br/><button>Create</button></form></div>) }
